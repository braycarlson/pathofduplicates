function replaceClass(e,t,a){e.classList.contains(t)&&e.classList.remove(t),e.classList.add(a)}function fadeIn(t,a){t.classList.add("fadein"),t.style.display=a,"animation"in document.documentElement.style?t.addEventListener("animationend",function(e){t.style.display=a,t.classList.remove("fadein")}):(t.style.display=a,t.classList.remove("fadein"))}function fadeOut(t){t.classList.add("fadeout"),"animation"in document.documentElement.style?t.addEventListener("animationend",function(e){t.style.display="none",t.classList.remove("fadeout")}):(t.style.display="none",t.classList.remove("fadeout"))}function resetClass(e,t){var a,n=e.getElementsByClassName(t);if(n)for(a=n.length-1;0<=a;--a)n[a].classList.contains(t)&&n[a].classList.remove(t)}function isIndex(e){return/^[0-9]+$/.test(e)}function isUsername(e){return/^[a-zA-Z0-9_]+$/.test(e)}function isLength(e){return 3<=e.length}function isJSON(e){try{JSON.parse(e)}catch(e){return!1}return!0}function validateUsername(){var e=document.getElementById("username"),t=document.querySelectorAll("#username-hints > li");isUsername(e.value)&&replaceClass(t[1],"invalid","valid"),!isUsername(e.value)&&e.value&&replaceClass(t[1],"valid","invalid"),isLength(e.value)&&replaceClass(t[2],"invalid","valid"),isLength(e.value)||(t[2].classList.remove("valid"),t[2].classList.remove("invalid")),e.value||(t[1].classList.remove("valid"),t[1].classList.remove("invalid"),t[2].classList.remove("valid"),t[2].classList.remove("invalid")),isUsername(e.value)&&isLength(e.value)?replaceClass(e,"invalid","valid"):(isUsername(e.value)||isLength(e.value)||!e.value)&&(isUsername(e.value)&&!isLength(e.value)||!e.value)?(e.classList.remove("valid"),e.classList.remove("invalid")):replaceClass(e,"valid","invalid")}function validateIndex(){var e=document.getElementById("index"),t=document.querySelectorAll("#index-hints > li");isIndex(e.value)?(replaceClass(e,"invalid","valid"),replaceClass(t[1],"invalid","valid")):e.value?(replaceClass(e,"valid","invalid"),replaceClass(t[1],"valid","invalid")):(e.classList.remove("valid"),e.classList.remove("invalid"),t[1].classList.remove("valid"),t[1].classList.remove("invalid"))}function validateLeague(){var e=document.getElementById("league"),t=document.querySelectorAll("#league-hints > li");e.value&&(replaceClass(e,"invalid","valid"),replaceClass(t[1],"invalid","valid"))}function validateStashtab(){var e=document.getElementById("stash"),t=document.querySelectorAll("#stashtab-hints > li");isJSON(e.value)&&isNaN(e.value)?(replaceClass(e,"invalid","valid"),replaceClass(t[1],"invalid","valid")):e.value?(replaceClass(e,"valid","invalid"),replaceClass(t[1],"valid","invalid")):(e.classList.remove("valid"),e.classList.remove("invalid"),t[1].classList.remove("valid"),t[1].classList.remove("invalid"))}function createLink(e){e.preventDefault();var t=document.getElementById("username"),a=document.getElementById("index"),n=document.getElementById("league");if(t.value&&a.value&&n.value&&isUsername(t.value)&&isLength(t.value)&&isIndex(a.value)){var l="https://www.pathofexile.com/character-window/get-stash-items?league="+n.value+"&tabIndex="+a.value+"&accountName="+t.value;window.open(l)}}function showHint(e){var t,a,n=e.nextElementSibling,l=n.querySelector("li:nth-child(1)"),s=n.querySelectorAll("li:not(:nth-child(1))");for(t=0,a=s.length;t<a;t++)s[t].style.display="list-item";l.style.display="none"}function hideHint(e){var t,a,n=e.nextElementSibling,l=n.querySelector("li:nth-child(1)"),s=n.querySelectorAll("li:not(:nth-child(1))");for(t=0,a=s.length;t<a;t++)s[t].style.display="none";l.style.display="block"}function showLoader(){document.getElementById("loader").style.display="block"}function hideLoader(){document.getElementById("loader").style.display="none"}function hideMessage(){document.getElementById("message").style.display="none"}function clearMessage(){document.getElementById("message").innerHTML=""}function clearItems(){document.getElementById("items").innerHTML=""}function createTable(e){var t=document.getElementById("items"),a=document.createElement("table"),n=document.createElement("thead"),l=document.createElement("tr"),s=document.createElement("th"),i=document.createElement("th"),d=document.createElement("th"),c=document.createElement("tbody");a.classList.add("duplicates"),a.appendChild(n),a.appendChild(l),a.appendChild(s),a.appendChild(i),a.appendChild(d),n.appendChild(l),l.appendChild(s),l.appendChild(i),l.appendChild(d);var o,r,u,m,v,p,h,g=document.createTextNode("Artwork"),L=document.createTextNode("Item"),y=document.createTextNode("Duplicates");for(s.appendChild(g),i.appendChild(L),d.appendChild(y),a.appendChild(c),v=0,p=e.length;v<p;v++)for(h in e[v]){e[v].hasOwnProperty(h)&&(o=document.createTextNode(h)),m=document.createTextNode(e[v][h][0]),u=e[v][h][1],(r=document.createElement("img")).src=u,r.alt=h,r.height=36,r.width=36;var E=document.createElement("tr"),f=document.createElement("td"),C=document.createElement("td"),I=document.createElement("td");f.appendChild(r),C.appendChild(o),I.appendChild(m),E.appendChild(f),E.appendChild(C),E.appendChild(I),c.appendChild(E)}t.appendChild(a),fadeIn(t,"block"),t.scrollIntoView({behavior:"smooth"})}function showMessage(e){var t,a=document.getElementById("message"),n=document.createElement("li");e.none?(t=document.createTextNode(e.none),n.classList.add("valid")):(t=document.createTextNode(e.error),n.classList.add("invalid")),n.appendChild(t),a.appendChild(n),fadeIn(message,"block")}function createStash(e){e.preventDefault();var t=document.getElementById("stash").value,a=new XMLHttpRequest;showLoader(),a.onload=function(){if(4==a.readyState&&200==a.status&&a.responseText){hideLoader();var e=JSON.parse(a.responseText);e.success?(hideMessage(),createTable(e.success)):showMessage(e)}},a.open("POST","stashtab.php",!0),a.setRequestHeader("Content-type","application/json"),a.send(t)}document.getElementById("signin-button").addEventListener("click",function(){fadeOut(document.getElementById("signin"))}),document.getElementById("url").addEventListener("focus",function(e){var t=e.target||e.srcElement;t.classList.contains("edge-autoSuggestFieldFilled")&&t.classList.remove("edge-autoSuggestFieldFilled"),t.classList.contains("validate")&&showHint(t)},!0),document.getElementById("url").addEventListener("blur",function(e){var t=e.target||e.srcElement;t.classList.contains("validate")&&hideHint(t)},!0),document.getElementById("stashtab").addEventListener("focus",function(e){var t=e.target||e.srcElement;t.classList.contains("edge-autoSuggestFieldFilled")&&t.classList.remove("edge-autoSuggestFieldFilled"),t.classList.contains("validate")&&showHint(t)},!0),document.getElementById("stashtab").addEventListener("blur",function(e){var t=e.target||e.srcElement;t.classList.contains("validate")&&hideHint(t)},!0),document.getElementById("username").addEventListener("input",validateUsername),document.getElementById("index").addEventListener("input",validateIndex),document.getElementById("league").addEventListener("change",validateLeague),document.getElementById("url").addEventListener("submit",createLink),document.getElementById("url").addEventListener("reset",function(e){var t=e.target||e.srcElement;resetClass(t,"valid"),resetClass(t,"invalid")}),document.getElementById("stashtab").addEventListener("input",validateStashtab),document.getElementById("stashtab").addEventListener("submit",function(e){clearMessage(),clearItems(),createStash(e)}),document.getElementById("stashtab").addEventListener("reset",function(e){clearMessage(),hideMessage();var t=e.target||e.srcElement;resetClass(t,"valid"),resetClass(t,"invalid")});
